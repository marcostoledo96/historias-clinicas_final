<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" contenido="width=device-width, initial-scale=1.0" />
  <title>Configuración - Sistema de Historias Clínicas</title>
  <link rel="stylesheet" href="css/styles.css" />
  <!--
    ! Página: Configuración
    * Propósito: actualizar datos del perfil, cambiar contraseña y preferencias locales
    * Scripts: utils.js, auth.js, components.js, configuracion.js
    ? Requiere sesión activa; accede a /api/auth/perfil y /api/auth/password
  -->
</head>
<body>
  <div class="diseno-principal">
    <div id="encabezado-container"></div>

    <main class="contenido">
      <div id="alert-container"></div>

      <div class="card">
        <div class="card-encabezado">
          <h2 class="card-title titulo-pagina"><span class="material-symbols-outlined" aria-hidden="true">settings</span> Configuración de la cuenta</h2>
          <p class="text-gray-600">Actualiza tus datos personales y preferencias</p>
        </div>
        <div class="card-body">
          <form id="form-perfil">
            <div class="fila-formulario">
              <div class="grupo-formulario w-full">
                <label class="etiqueta-formulario">Nombre completo</label>
                <input name="nombre" class="form-input" required />
              </div>
              <div class="grupo-formulario w-full">
                <label class="etiqueta-formulario">Email</label>
                <input name="email" type="email" class="form-input" required />
              </div>
            </div>
            <div class="card-pie-pagina">
              <button type="submit" id="boton-guardar-perfil" class="boton boton-primario boton-field"><span class="material-symbols-outlined" aria-hidden="true">save</span> Guardar cambios</button>
            </div>
          </form>
        </div>
      </div>

      <div class="card mt-4">
        <div class="card-encabezado">
          <h3 class="card-title titulo-seccion"><span class="material-symbols-outlined" aria-hidden="true">lock</span> Cambiar contraseña</h3>
        </div>
        <div class="card-body">
          <form id="form-password">
            <div class="fila-formulario">
              <div class="grupo-formulario w-full">
                <label class="etiqueta-formulario">Contraseña actual</label>
                <input name="password_actual" type="password" class="form-input" required />
              </div>
              <div class="grupo-formulario w-full">
                <label class="etiqueta-formulario">Nueva contraseña</label>
                <input name="password_nueva" type="password" class="form-input" required />
              </div>
            </div>
            <div class="card-pie-pagina">
              <button type="submit" id="boton-guardar-password" class="boton boton-secundario boton-field"><span class="material-symbols-outlined" aria-hidden="true">key</span> Actualizar contraseña</button>
            </div>
          </form>
        </div>
      </div>

      <div class="card mt-4">
        <div class="card-encabezado">
          <h3 class="card-title titulo-seccion"><span class="material-symbols-outlined" aria-hidden="true">tune</span> Preferencias</h3>
        </div>
        <div class="card-body">
          <form id="form-preferencias">
            <div class="fila-formulario">
              <div class="grupo-formulario">
                <label class="etiqueta-formulario">Tema</label>
                <select name="tema" class="form-select">
                  <option value="claro">Claro</option>
                  <option value="oscuro">Oscuro</option>
                </select>
              </div>
              <div class="grupo-formulario">
                <label class="etiqueta-formulario">Abrir Inicio al entrar</label>
                <input name="auto_inicio" type="checkbox" />
              </div>
              <div class="grupo-formulario">
                <label class="etiqueta-formulario">Elementos por página (listados)</label>
                <select name="page_size" class="form-select">
                  <option value="5">5</option>
                  <option value="10" selected>10</option>
                  <option value="20">20</option>
                </select>
              </div>
            </div>
            <div class="card-pie-pagina">
              <button type="submit" id="boton-guardar-pref" class="boton boton-field">Guardar preferencias</button>
            </div>
          </form>
        </div>
      </div>

    </main>

    <div id="pie-pagina-container"></div>
  </div>

  <script src="js/utils.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/components.js"></script>
  <script src="js/configuracion.js"></script>
</body>
</html>

